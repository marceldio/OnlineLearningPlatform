Online learning platform by Marcel Dio
# dj_drf
Платформа для онлайн обучения.

Этот проект представляет собой Django-приложение, развернутое с использованием Docker и Docker Compose.
Реализован бэкенд-сервер для SPA веб-приложения LMS-системы, который возвращает клиенту JSON-структуры.
Django-проект, CRUD уроков, курсов, пользователей, возможность оплаты с использованием STRIPE, 
реализована задача которая проверят пользователей по дате последнего входа, 
функционал по подписке на обновление уроков/курсов через асинхронную рассылку с помощью Celery и Celery Beat.
Настроен вывод документации проекта, основной функционал покрыт тестами.

Для запуска проекта (используется Poetry):
клонировать файлы из репозитория,
заполнить данными файл .env.sample переименовав его в .env,
собрать и запустить контейнеры:
для сборки и запуска Docker-контейнеров выполните команду:
docker-compose up --build,
создайте суперпользователя:
в новом терминале создайте суперпользователя для доступа к панели администратора Django:
docker-compose exec app python manage.py createsuperuser
следуйте инструкциям для ввода имени пользователя, email и пароля, 
доступ к приложению: после успешного запуска приложение будет доступно по адресу http://localhost:8000
для доступа к панели администратора перейдите по http://localhost:8000/admin и войдите с учетными данными 
суперпользователя, созданного на предыдущем шаге.

Команды для управления проектом:
    Остановить контейнеры:
        docker-compose down
    Выполнить миграции базы данных:
        docker-compose exec app python manage.py migrate
    Запуск Django Shell:
        docker-compose exec app python manage.py shell

Зависимости
Все зависимости управляются через Poetry. 
Для обновления зависимостей, установите Poetry и выполните: poetry update

Примечания
Убедитесь, что у вас установлен Docker и Docker Compose.
Переменные окружения в файле .env могут быть изменены для ваших нужд.
Все команды выполняются из корневой директории проекта.

фикстуры для БД: payments.json, users/fixtures/groups.json
команда создание суперюзера: python3 manage.py csu
команда загрузки списка платежей: python3 manage.py load_payments 

Подключена возможность оплаты курсов через https://stripe.com/docs/api.
Доступы можно получить напрямую из документации, а также пройти простую регистрацию 
по адресу https://dashboard.stripe.com/register.
Достаточно зарегистрировать аккаунт и не подтверждать его — аккаунт 
будет находиться в тестовом режиме.
Для работы с запросами вам понадобится реализовать обращение к эндпоинтам:
https://stripe.com/docs/api/products/create — создание продукта;
https://stripe.com/docs/api/prices/create — создание цены;
https://stripe.com/docs/api/checkout/sessions/create — создание сессии для получения ссылки на оплату.
При создании цены и сессии обратите внимание на поля, которые вы передаете в запросе. 
При создании сессии нужно передавать id цены, которая соответствует конкретному продукту.
Для тестирования можно использовать номера карт из документации:
https://stripe.com/docs/terminal/references/testing#standard-test-cards.
При необходимости проверки статуса платежа
https://stripe.com/docs/api/checkout/sessions/retrieve
по id созданной в Stripe сессии. 
Статус платежа также можно дополнительно хранить в модели платежей 
в нашей системе.
Перед созданием сессии необходимо создать продукт и цену. Все эти данные мы можем получить из модели платежа (модель 
платежа связана с продуктом, в продукте есть название и цена).
Обратите внимание, что цены при передаче в Strip указываются в копейках (то есть текущую цену продукта 
нужно умножить на 100).

Для сохранения уроков и курсов реализована дополнительная проверка 
на отсутствие в материалах ссылок на сторонние ресурсы, кроме youtube.com.
То есть ссылки на видео можно прикреплять в материалы, а ссылки на сторонние 
образовательные платформы или личные сайты — нельзя.
Создан файл validators.py, проверяющий ссылку, 
которую пользователь хочет записать в поле урока.
Интегрирован валидатор в сериализатор.

Добавлена модель подписки на обновления курса для пользователя.
Реализована пагинация в paginators.py для вывода всех уроков и курсов.

Пагинацию реализуйте в отдельном файле paginators.py.  
Укажите параметры page_size, page_size_query_param, max_page_size для класса PageNumberPagination. 
Количество элементов на странице выберите самостоятельно. 
Пагинатор интегрирован в контроллеры, используя параметр pagination_class.

Написаны тесты, 
которые проверяют корректность работы CRUD уроков и функционал работы подписки на обновления курса.

Реализован CRUD для пользователей, 
настроено использование JWT-авторизации и каждый эндпоинт закрыт авторизацией.
Эндпоинты для авторизации и регистрации доступны для неавторизованных пользователей.
Пользователь:
    авторизация по email;
    телефон;
    город;
    аватарка.
Курс:
    название,
    превью (картинка),
    описание.
Урок:
    название,
    описание,
    превью (картинка),
    ссылка на видео.
Урок и курс - это связанные между собой сущности.

Есть группа модераторов и описаны для нее права работы с уроками и курсами, 
но без возможности их удалять и создавать новые. 

Описаны права доступа для объектов таким образом, 
чтобы пользователи, которые не входят в группу модераторов, 
могли видеть, редактировать и удалять только свои курсы и уроки.

Платежи
    пользователь,
    дата оплаты,
    оплаченный курс или урок,
    сумма оплаты,
    способ оплаты: наличные или перевод на счет.
    Поля:
    пользователь,
    оплаченный курс
    и
    отдельно оплаченный урок
    это ссылки на соответствующие модели.

Для сериализатора для модели курса реализовано поле вывода уроков. 

Настроена фильтрация для эндпоинта вывода списка платежей с возможностями:
    менять порядок сортировки по дате оплаты,
    фильтровать по курсу или уроку,
    фильтровать по способу оплаты.